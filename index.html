<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algo For You - Algorithmic Trading Solutions</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Real-time Data Libraries -->
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.1/socket.io.min.js"></script>

<!-- Status Indicator CSS -->
<style>
    .data-status {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
        background: rgba(30, 64, 175, 0.95);
        color: white;
        padding: 10px 15px;
        border-radius: 8px;
        font-size: 0.8rem;
        display: flex;
        align-items: center;
        gap: 8px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }
    
    .status-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: #10b981;
        animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
        0% { opacity: 1; transform: scale(1); }
        50% { opacity: 0.5; transform: scale(0.9); }
        100% { opacity: 1; transform: scale(1); }
    }
    
    .data-status .time {
        opacity: 0.7;
        font-size: 0.7rem;
    }
    
    /* Improved Ticker Styles */
    .ticker-volume {
        font-size: 0.7rem;
        opacity: 0.8;
        margin-left: 8px;
        padding: 2px 6px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
    }
    
    /* Real-time Price in Options */
    .real-price-tag {
        display: inline-block;
        margin-left: 10px;
        padding: 2px 8px;
        background: var(--primary);
        color: white;
        border-radius: 4px;
        font-size: 0.7rem;
        font-weight: 600;
    }
</style>
    <style>
        /* Brightex Tech Color Scheme */
        :root {
            --primary: #1e40af;
            --primary-dark: #1e3a8a;
            --secondary: #3b82f6;
            --accent: #06b6d4;
            --text-dark: #1f2937;
            --text-light: #6b7280;
            --bg-light: #f8fafc;
            --white: #ffffff;
            --gradient: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            --gradient-2: linear-gradient(135deg, #1e40af, #06b6d4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            overflow-x: hidden;
            font-size: 14px;
            background: #000000;
        }

        /* Candlestick Background */
        .candlestick-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            opacity: 0.1;
            background: #000000;
        }

        /* Floating Candles */
        .floating-candles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .candle {
            position: absolute;
            width: 8px;
            background: #10b981;
            border-radius: 2px;
            animation: floatCandle 25s linear infinite;
            opacity: 0.4;
        }

        .candle.red {
            background: #ef4444;
        }

        .candle .wick {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 20px;
            background: #6b7280;
        }

        .candle .top-wick {
            top: -20px;
        }

        .candle .bottom-wick {
            bottom: -20px;
        }

        @keyframes floatCandle {
            0% {
                transform: translateY(100vh) translateX(-100px);
                opacity: 0;
            }
            10% {
                opacity: 0.4;
            }
            90% {
                opacity: 0.4;
            }
            100% {
                transform: translateY(-100px) translateX(100px);
                opacity: 0;
            }
        }

        /* Enhanced Market Ticker */
        .market-ticker {
            background: rgba(30, 64, 175, 0.95);
            color: white;
            padding: 12px 0;
            position: fixed;
            top: 80px;
            width: 100%;
            z-index: 999;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .ticker-content {
            display: flex;
            align-items: center;
            justify-content: space-around;
            font-size: 0.9rem;
            font-weight: 600;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .ticker-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .ticker-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .ticker-item.up {
            color: #10b981;
        }

        .ticker-item.down {
            color: #ef4444;
        }

        .ticker-price {
            font-weight: 700;
            font-size: 1rem;
        }

        .ticker-change {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            z-index: 1000;
            padding: 12px 0;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
        }

        .logo-img {
            width: 42px;
            height: 42px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 1.1rem;
            box-shadow: 0 4px 12px rgba(30, 64, 175, 0.3);
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .company-name {
            font-size: 1.7rem;
            font-weight: 800;
            background: linear-gradient(135deg, #1e40af, #3b82f6, #06b6d4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
            letter-spacing: -0.5px;
        }

        .company-tagline {
            font-size: 0.65rem;
            color: var(--text-light);
            font-weight: 600;
            letter-spacing: 0.8px;
            margin-top: 2px;
        }

        /* Navigation Menu */
        .nav-menu {
            display: flex;
            list-style: none;
            gap: 25px;
        }

        .nav-menu a {
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            position: relative;
            padding: 5px 0;
        }

        .nav-menu a:hover {
            color: var(--primary);
        }

        .nav-menu a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s ease;
        }

        .nav-menu a:hover::after {
            width: 100%;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--primary);
            cursor: pointer;
        }

        /* Hero Section */
        .hero {
            background: var(--gradient);
            color: var(--white);
            padding: 180px 0 100px;
            position: relative;
            overflow: hidden;
            text-align: center;
            min-height: 100vh;
            display: flex;
            align-items: center;
        }

        .hero-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            z-index: 2;
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            line-height: 1.2;
        }

        .hero p {
            font-size: 1.4rem;
            opacity: 0.9;
            margin-bottom: 40px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .btn {
            padding: 15px 35px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .btn-primary {
            background: var(--white);
            color: var(--primary);
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 255, 255, 0.4);
        }

        .btn-secondary {
            background: transparent;
            color: var(--white);
            border: 2px solid var(--white);
        }

        .btn-secondary:hover {
            background: var(--white);
            color: var(--primary);
        }

        /* Quick Actions */
        .quick-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 12px 25px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--white);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .action-btn:hover {
            background: var(--white);
            color: var(--primary);
            transform: translateY(-2px);
        }

        /* Trust Badges */
        .trust-badges {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .badge {
            display: flex;
            align-items: center;
            gap: 10px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.9rem;
        }

        .badge i {
            font-size: 1.2rem;
            color: #10b981;
        }

        /* Enhanced Stats Section */
        .stats {
            background: var(--bg-light);
            padding: 80px 0;
        }

        .stats-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }

        .stat-card {
            text-align: center;
            padding: 40px 30px;
            background: var(--white);
            border-radius: 15px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border-left: 4px solid var(--primary);
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .stat-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover .stat-icon {
            transform: scale(1.1);
        }

        .stat-icon i {
            font-size: 2rem;
            color: var(--white);
        }

        .stat-number {
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .stat-label {
            color: var(--text-light);
            font-size: 1.1rem;
            font-weight: 600;
        }

        /* Content Sections */
        .content-section {
            padding: 100px 0;
            animation: fadeIn 0.5s ease-in;
            display: none;
        }

        #home {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .section-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .section-header h2 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .section-header p {
            color: var(--text-light);
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Back to Home Button */
        .back-to-home {
            position: fixed;
            top: 120px;
            left: 20px;
            z-index: 1000;
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: none;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(30, 64, 175, 0.3);
        }

        .back-to-home:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        /* ========== ENHANCED BACKTESTING STYLES ========== */
        .backtest-container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .strategy-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .strategy-tab {
            padding: 12px 25px;
            background: var(--bg-light);
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            min-width: 120px;
        }

        .strategy-tab.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .strategy-tab:hover {
            transform: translateY(-2px);
        }

        .parameters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .param-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .param-group label {
            font-weight: 600;
            color: var(--text-dark);
        }

        .form-control {
            padding: 12px 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Instrument Type Selector */
        .instrument-type {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .instrument-btn {
            padding: 12px 25px;
            background: var(--bg-light);
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .instrument-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .instrument-btn:hover {
            transform: translateY(-2px);
        }

        /* Derivative Specific Parameters */
        .derivative-params {
            background: var(--bg-light);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid var(--accent);
        }

        .derivative-params h4 {
            color: var(--accent);
            margin-bottom: 15px;
        }

        .option-type {
            display: flex;
            gap: 15px;
            margin-top: 10px;
        }

        .option-btn {
            padding: 10px 20px;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option-btn.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        /* Strategy Specific Parameters */
        .strategy-params {
            background: var(--bg-light);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .strategy-params.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .run-backtest {
            background: var(--primary);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 30px auto;
        }

        .run-backtest:hover {
            background: var(--primary-dark);
            transform: translateY(-3px);
        }

        .performance-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .metric-card {
            background: var(--bg-light);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border-left: 4px solid var(--primary);
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
        }

        .metric-label {
            color: var(--text-light);
            margin-top: 5px;
        }

        /* Advanced Metrics */
        .advanced-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .adv-metric {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
        }

        .adv-metric .label {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-bottom: 5px;
        }

        .adv-metric .value {
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* Trade Results Table */
        .trades-table-container {
            margin: 30px 0;
            overflow-x: auto;
        }

        .trades-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        .trades-table th {
            background: var(--primary);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        .trades-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e5e7eb;
        }

        .trades-table tr:hover {
            background: var(--bg-light);
        }

        .profit-up {
            color: #10b981;
            font-weight: bold;
        }

        .profit-down {
            color: #ef4444;
            font-weight: bold;
        }

        /* Derivative Specific Trade Table */
        .derivative-trade {
            background: rgba(6, 182, 212, 0.05);
        }

        .derivative-trade td {
            border-left: 3px solid var(--accent);
        }

        /* ========== YOUR ORIGINAL STYLES CONTINUE ========== */

        /* Services Section */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .service-card {
            background: var(--white);
            padding: 40px 30px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            border: 1px solid #e5e7eb;
        }

        .service-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient);
        }

        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .service-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 25px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .service-icon i {
            font-size: 2rem;
            color: var(--white);
        }

        .service-card h3 {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text-dark);
        }

        .service-card p {
            color: var(--text-light);
            line-height: 1.6;
        }

        /* Packages Section */
        .packages {
            padding: 100px 0;
            background: var(--bg-light);
        }

        .packages-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }

        .package-card {
            background: var(--white);
            border-radius: 15px;
            padding: 40px 30px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            position: relative;
            border: 2px solid #e5e7eb;
        }

        .package-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            border-color: var(--primary);
        }

        .package-card.popular {
            border-color: var(--primary);
            transform: scale(1.05);
        }

        .package-card.popular::before {
            content: 'MOST POPULAR';
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--primary);
            color: var(--white);
            padding: 5px 20px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .package-header {
            margin-bottom: 30px;
        }

        .package-name {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .package-price {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 10px;
        }

        .package-period {
            color: var(--text-light);
            font-size: 1rem;
        }

        .package-features {
            list-style: none;
            margin-bottom: 30px;
            text-align: left;
        }

        .package-features li {
            padding: 12px 0;
            border-bottom: 1px solid #f1f5f9;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .package-features li:last-child {
            border-bottom: none;
        }

        .package-features li i {
            color: #10b981;
            font-size: 1.1rem;
        }

        .package-btn {
            background: var(--gradient);
            color: var(--white);
            border: none;
            padding: 15px 40px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .package-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
        }

        /* FAQ Section */
        .faq {
            padding: 100px 0;
            background: var(--white);
        }

        .faq-item {
            background: var(--white);
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            border-left: 4px solid var(--primary);
        }

        .faq-question {
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1rem;
            background: var(--white);
            transition: background 0.3s ease;
        }

        .faq-question:hover {
            background: var(--bg-light);
        }

        .faq-answer {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
            background: var(--white);
        }

        .faq-answer p {
            padding-bottom: 20px;
            color: var(--text-light);
            line-height: 1.6;
        }

        .faq-item.active .faq-answer {
            max-height: 500px;
        }

        /* Testimonials Section */
        .testimonials {
            padding: 100px 0;
            background: var(--white);
        }

        .testimonials-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
        }

        .testimonial-card {
            background: var(--white);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            position: relative;
            border: 1px solid #e5e7eb;
        }

        .testimonial-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient);
        }

        .stars {
            color: #fbbf24;
            font-size: 1.2rem;
            margin-bottom: 15px;
        }

        .testimonial-card p {
            font-style: italic;
            margin-bottom: 20px;
            color: var(--text-light);
            line-height: 1.6;
        }

        .client-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .client-avatar {
            width: 50px;
            height: 50px;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--white);
        }

        /* Disclaimer Section */
        .disclaimer {
            padding: 100px 0;
            background: var(--bg-light);
        }

        .disclaimer-content {
            background: var(--white);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            border-left: 4px solid var(--primary);
        }

        .disclaimer-section {
            margin-bottom: 30px;
        }

        .disclaimer-section h3 {
            color: var(--primary-dark);
            font-size: 1.3rem;
            margin-bottom: 15px;
        }

        .disclaimer-section p {
            color: var(--text-light);
            margin-bottom: 10px;
            line-height: 1.6;
        }

        .disclaimer-section ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .disclaimer-section li {
            color: var(--text-light);
            margin-bottom: 8px;
            line-height: 1.6;
        }

        .warning-box {
            background: #fef2f2;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #ef4444;
            margin: 20px 0;
        }

        .highlight-box {
            background: var(--bg-light);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid var(--primary);
            margin: 20px 0;
        }

        /* Contact Section */
        .contact {
            padding: 100px 0;
            background: var(--gradient);
            color: var(--white);
        }

        .contact-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
        }

        .contact-info h3 {
            font-size: 2rem;
            margin-bottom: 20px;
        }

        .contact-info > p {
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .contact-icon {
            width: 50px;
            height: 50px;
            background: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .contact-icon i {
            color: var(--primary);
            font-size: 1.2rem;
        }

        .contact-form {
            background: var(--white);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .contact-form h3 {
            color: var(--text-dark);
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .contact-form > p {
            color: var(--text-light);
            margin-bottom: 25px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1rem;
            background: var(--white);
            color: var(--text-dark);
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .btn-whatsapp {
            background: #25D366;
            color: white;
            border: none;
            width: 100%;
            justify-content: center;
            padding: 15px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-whatsapp:hover {
            background: #128C7E;
            transform: translateY(-2px);
        }

        /* Footer */
        .footer {
            background: var(--primary-dark);
            color: var(--white);
            padding: 60px 0 20px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1.5fr;
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-section h3 {
            margin-bottom: 20px;
            font-size: 1.3rem;
            color: var(--white);
        }

        .footer-section p {
            color: #d1d5db;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 12px;
        }

        .footer-section ul li a {
            color: #d1d5db;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-section ul li a:hover {
            color: var(--white);
        }

        .footer-bottom {
            border-top: 1px solid #374151;
            padding-top: 20px;
            text-align: center;
            color: #9ca3af;
            font-size: 0.9rem;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--white);
            border-radius: 15px;
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            padding: 20px 30px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            color: var(--primary);
            font-size: 1.5rem;
            margin: 0;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-light);
            transition: color 0.3s ease;
        }

        .close-modal:hover {
            color: var(--primary);
        }

        .modal-body {
            padding: 30px;
        }

        /* Calculator Styles */
        .calculator-form {
            display: grid;
            gap: 20px;
        }

        .calculator-input {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .calculator-input label {
            font-weight: 600;
            color: var(--text-dark);
        }

        .calculator-input input {
            padding: 12px 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .calculator-input input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .calculator-result {
            background: var(--bg-light);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
        }

        .calculator-result h4 {
            color: var(--primary);
            margin-bottom: 10px;
        }

        .profit-amount {
            font-size: 2rem;
            font-weight: 700;
            color: #10b981;
            margin: 10px 0;
        }

        .profit-breakdown {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .breakdown-item {
            background: var(--white);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .breakdown-item h5 {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .breakdown-value {
            font-weight: 700;
            color: var(--primary);
        }

        /* Average Calculator */
        .trade-values-list {
            background: var(--bg-light);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--primary);
        }

        .trade-values-list h5 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .add-trade-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            justify-content: center;
            margin-top: 10px;
        }

        .add-trade-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .trades-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .trades-table th,
        .trades-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }

        .trades-table th {
            background: var(--bg-light);
            font-weight: 600;
            color: var(--primary);
        }

        .trades-table tr:hover {
            background: var(--bg-light);
        }

        .delete-btn {
            background: #ef4444;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .delete-btn:hover {
            background: #dc2626;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .nav-menu {
                gap: 20px;
            }
            
            .footer-content {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 768px) {
            .nav-menu {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background: var(--white);
                flex-direction: column;
                padding: 20px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            }
            
            .nav-menu.active {
                display: flex;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
            
            .hero-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }
            
            .trust-badges {
                flex-direction: column;
                gap: 15px;
            }
            
            .contact-content {
                grid-template-columns: 1fr;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .packages-grid {
                grid-template-columns: 1fr;
            }
            
            .package-card.popular {
                transform: scale(1);
            }
            
            .market-ticker {
                top: 70px;
            }
            
            .ticker-content {
                flex-direction: column;
                gap: 10px;
            }
            
            .ticker-item {
                width: 100%;
                justify-content: center;
            }
            
            .quick-actions {
                flex-direction: column;
                align-items: center;
            }
            
            .action-btn {
                width: 100%;
                max-width: 250px;
                justify-content: center;
            }
            
            .profit-breakdown {
                grid-template-columns: 1fr;
            }
            
            .input-row {
                grid-template-columns: 1fr;
            }
            
            .trades-table {
                font-size: 0.8rem;
            }
            
            .trades-table th,
            .trades-table td {
                padding: 8px;
            }

            .logo-container {
                gap: 8px;
            }
            
            .logo-img {
                width: 35px;
                height: 35px;
                font-size: 0.9rem;
            }
            
            .company-name {
                font-size: 1.3rem;
            }
            
            .company-tagline {
                font-size: 0.55rem;
            }

            .back-to-home {
                top: 100px;
                left: 10px;
                padding: 10px 15px;
                font-size: 0.8rem;
            }

            .strategy-tabs {
                flex-direction: column;
                align-items: center;
            }
            
            .strategy-tab {
                width: 100%;
                max-width: 250px;
            }
        }

        @media (max-width: 480px) {
            .performance-metrics {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .hero h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Background Elements -->
    <div class="candlestick-bg"></div>
    <div class="floating-candles" id="floatingCandles"></div>

    <!-- Back to Home Button -->
    <button class="back-to-home" id="backToHome">
        <i class="fas fa-arrow-left"></i>
        Back to Home
    </button>

    <!-- Market Ticker with Real Prices -->
    <div class="market-ticker">
        <div class="ticker-content">
            <div class="ticker-item up">
                <i class="fas fa-chart-line"></i>
                <div>
                    <div class="ticker-price">NIFTY 50</div>
                    <div class="ticker-change" id="niftyPrice">22,123.65 (+0.85%)</div>
                </div>
            </div>
            <div class="ticker-item up">
                <i class="fas fa-robot"></i>
                <div>
                    <div class="ticker-price">BANK NIFTY</div>
                    <div class="ticker-change" id="bankniftyPrice">46,890.20 (+1.25%)</div>
                </div>
            </div>
            <div class="ticker-item up">
                <i class="fas fa-users"></i>
                <div>
                    <div class="ticker-price">SENSEX</div>
                    <div class="ticker-change" id="sensexPrice">73,245.80 (+0.92%)</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Header with Updated Navigation -->
    <header class="header">
        <div class="nav-container">
            <a href="#home" class="logo-container">
                <div class="logo-img">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="logo-text">
                    <div class="company-name">ALGO FOR YOU</div>
                    <div class="company-tagline">ALGORITHMIC TRADING</div>
                </div>
            </a>
            
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
            
            <!-- UPDATED NAV MENU -->
            <ul class="nav-menu" id="navMenu">
                <li><a href="#home">Home</a></li>
                <li><a href="#backtesting">Backtesting</a></li>
                <li><a href="#services">Services</a></li>
                <li><a href="#packages">Packages</a></li>
                <li><a href="#testimonials">Testimonials</a></li>
                <li><a href="#faq">FAQ</a></li>
                <li><a href="#disclaimer">Disclaimer</a></li>
                <li><a href="#contact">Contact Us</a></li>
            </ul>
        </div>
    </header>

    <!-- Enhanced Hero Section -->
    <section id="home" class="hero">
        <div class="hero-container">
            <h1>Build & Test Your Trading Strategies</h1>
            <p>Create custom algorithmic trading strategies with our advanced builder and test them with realistic backtesting including Derivatives</p>
            
            <div class="hero-buttons">
                <a href="#backtesting" class="btn btn-primary">
                    <i class="fas fa-chart-line"></i>
                    Start Backtesting
                </a>
                <a href="#contact" class="btn btn-secondary">
                    <i class="fas fa-puzzle-piece"></i>
                    Get Started
                </a>
            </div>

            <!-- UPDATED Quick Actions -->
            <div class="quick-actions">
                <button class="action-btn" onclick="downloadBrochure()">
                    <i class="fas fa-download"></i>
                    Download Brochure
                </button>
                <button class="action-btn" onclick="openCalculator()">
                    <i class="fas fa-calculator"></i>
                    Profit Calculator
                </button>
                <button class="action-btn" onclick="openAverageCalculator()">
                    <i class="fas fa-chart-bar"></i>
                    Average Calculator
                </button>
                <button class="action-btn" onclick="showSection('backtesting')">
                    <i class="fas fa-play-circle"></i>
                    Quick Backtest
                </button>
                <button class="action-btn" onclick="selectInstrumentType('derivatives')">
                    <i class="fas fa-exchange-alt"></i>
                    Test Derivatives
                </button>
            </div>

            <!-- Trust Badges -->
            <div class="trust-badges">
                <div class="badge">
                    <i class="fas fa-shield-alt"></i>
                    <span>25+ Strategies</span>
                </div>
                <div class="badge">
                    <i class="fas fa-bolt"></i>
                    <span>Realistic Prices</span>
                </div>
                <div class="badge">
                    <i class="fas fa-code"></i>
                    <span>Derivatives Backtesting</span>
                </div>
                <div class="badge">
                    <i class="fas fa-trophy"></i>
                    <span>92% Success Rate</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Enhanced Stats Section -->
    <section class="stats">
        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="stat-number">25+</div>
                <div class="stat-label">Trading Strategies</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-number">500+</div>
                <div class="stat-label">Derivatives Tested</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-rupee-sign"></i>
                </div>
                <div class="stat-number">5Cr+</div>
                <div class="stat-label">Profits Generated</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="stat-number">24/7</div>
                <div class="stat-label">Real-time Prices</div>
            </div>
        </div>
    </section>

    <!-- =================== ENHANCED BACKTESTING SECTION =================== -->

    <!-- ENHANCED Backtesting Section with REAL PRICES & DERIVATIVES -->
    <section id="backtesting" class="content-section">
        <div class="container">
            <div class="section-header">
                <h2>Advanced Strategy Backtesting</h2>
                <p>Test 25+ trading strategies with realistic Indian market prices and derivatives support</p>
            </div>
            
            <div class="backtest-container">
                <!-- Instrument Type Selector -->
                <div class="instrument-type">
                    <button class="instrument-btn active" onclick="selectInstrumentType('equity')">Equity</button>
                    <button class="instrument-btn" onclick="selectInstrumentType('derivatives')">Derivatives</button>
                    <button class="instrument-btn" onclick="selectInstrumentType('currency')">Currency</button>
                    <button class="instrument-btn" onclick="selectInstrumentType('commodity')">Commodity</button>
                </div>
                
                <!-- Strategy Tabs - 25+ Strategies -->
                <div class="strategy-tabs">
                    <div class="strategy-tab active" onclick="selectStrategy('ma_crossover')">MA Crossover</div>
                    <div class="strategy-tab" onclick="selectStrategy('rsi')">RSI Divergence</div>
                    <div class="strategy-tab" onclick="selectStrategy('macd')">MACD Strategy</div>
                    <div class="strategy-tab" onclick="selectStrategy('bollinger')">Bollinger Bands</div>
                    <div class="strategy-tab" onclick="selectStrategy('stochastic')">Stochastic</div>
                    <div class="strategy-tab" onclick="selectStrategy('parabolic_sar')">Parabolic SAR</div>
                    <div class="strategy-tab" onclick="selectStrategy('ichimoku')">Ichimoku Cloud</div>
                    <div class="strategy-tab" onclick="selectStrategy('vwap')">VWAP Strategy</div>
                    <div class="strategy-tab" onclick="selectStrategy('pivot_points')">Pivot Points</div>
                    <div class="strategy-tab" onclick="selectStrategy('atr')">ATR Breakout</div>
                    <div class="strategy-tab" onclick="selectStrategy('volume_profile')">Volume Profile</div>
                    <div class="strategy-tab" onclick="selectStrategy('adx')">ADX Trend</div>
                    <div class="strategy-tab" onclick="selectStrategy('obv')">OBV Strategy</div>
                    <div class="strategy-tab" onclick="selectStrategy('cci')">CCI Strategy</div>
                    <div class="strategy-tab" onclick="selectStrategy('fibonacci')">Fibonacci</div>
                    <div class="strategy-tab" onclick="selectStrategy('dmi')">DMI Strategy</div>
                    <div class="strategy-tab" onclick="selectStrategy('keltner')">Keltner Channel</div>
                    <div class="strategy-tab" onclick="selectStrategy('supertrend')">SuperTrend</div>
                    <div class="strategy-tab" onclick="selectStrategy('heikin_ashi')">Heikin Ashi</div>
                    <div class="strategy-tab" onclick="selectStrategy('renko')">Renko Strategy</div>
                    <div class="strategy-tab" onclick="selectStrategy('kagi')">Kagi Strategy</div>
                    <div class="strategy-tab" onclick="selectStrategy('point_figure')">Point & Figure</div>
                    <div class="strategy-tab" onclick="selectStrategy('market_profile')">Market Profile</div>
                    <div class="strategy-tab" onclick="selectStrategy('turtle')">Turtle Trading</div>
                    <div class="strategy-tab" onclick="selectStrategy('price_action')">Price Action</div>
                    <div class="strategy-tab" onclick="selectStrategy('breakout')">Breakout Strategy</div>
                    <div class="strategy-tab" onclick="selectStrategy('mean_reversion')">Mean Reversion</div>
                    <div class="strategy-tab" onclick="selectStrategy('option_strategies')">Option Strategies</div>
                    <div class="strategy-tab" onclick="selectStrategy('future_spread')">Future Spread</div>
                    <div class="strategy-tab" onclick="selectStrategy('custom')">Custom Strategy</div>
                </div>
                
                <div class="parameters-grid">
                    <div class="param-group">
                        <label id="symbolLabel">Stock/Index</label>
                        <select class="form-control" id="backtestSymbol" onchange="updateRealPrice()">
                            <!-- Equity Options -->
                            <optgroup label="Indices" class="equity-option">
                                <option value="NIFTY">NIFTY 50</option>
                                <option value="BANKNIFTY">BANK NIFTY</option>
                                <option value="SENSEX">SENSEX</option>
                                <option value="NIFTYMIDCAP">NIFTY MIDCAP 100</option>
                                <option value="NIFTYSMALLCAP">NIFTY SMALLCAP 100</option>
                            </optgroup>
                            <optgroup label="Large Cap Stocks" class="equity-option">
                                <option value="RELIANCE">RELIANCE (2,845.65)</option>
                                <option value="TCS">TCS (3,920.50)</option>
                                <option value="INFY">INFOSYS (1,560.80)</option>
                                <option value="HDFCBANK">HDFC BANK (1,645.30)</option>
                                <option value="ICICIBANK">ICICI BANK (1,085.90)</option>
                                <option value="SBIN">SBI (765.45)</option>
                                <option value="AXISBANK">AXIS BANK (1,120.25)</option>
                                <option value="KOTAKBANK">KOTAK BANK (1,845.60)</option>
                            </optgroup>
                            <optgroup label="Mid Cap Stocks" class="equity-option">
                                <option value="BAJFINANCE">BAJAJ FINANCE (7,240.80)</option>
                                <option value="WIPRO">WIPRO (465.90)</option>
                                <option value="HCLTECH">HCL TECH (1,680.45)</option>
                                <option value="ONGC">ONGC (245.60)</option>
                                <option value="TITAN">TITAN (3,780.90)</option>
                            </optgroup>
                            
                            <!-- Derivatives Options -->
                            <optgroup label="NIFTY Options" class="derivative-option" style="display:none;">
                                <option value="NIFTY_FUT">NIFTY FUTURE</option>
                                <option value="NIFTY_CE_22100">NIFTY 22,100 CE (245.50)</option>
                                <option value="NIFTY_PE_22100">NIFTY 22,100 PE (186.75)</option>
                                <option value="NIFTY_CE_22200">NIFTY 22,200 CE (198.30)</option>
                                <option value="NIFTY_PE_22200">NIFTY 22,200 PE (210.45)</option>
                                <option value="NIFTY_CE_22300">NIFTY 22,300 CE (156.80)</option>
                                <option value="NIFTY_PE_22300">NIFTY 22,300 PE (245.90)</option>
                            </optgroup>
                            <optgroup label="BANKNIFTY Options" class="derivative-option" style="display:none;">
                                <option value="BANKNIFTY_FUT">BANKNIFTY FUTURE</option>
                                <option value="BANKNIFTY_CE_46800">BANKNIFTY 46,800 CE (1,245.60)</option>
                                <option value="BANKNIFTY_PE_46800">BANKNIFTY 46,800 PE (986.75)</option>
                                <option value="BANKNIFTY_CE_46900">BANKNIFTY 46,900 CE (1,098.30)</option>
                                <option value="BANKNIFTY_PE_46900">BANKNIFTY 46,900 PE (1,110.45)</option>
                            </optgroup>
                            <optgroup label="Stock Futures" class="derivative-option" style="display:none;">
                                <option value="RELIANCE_FUT">RELIANCE FUTURE</option>
                                <option value="TCS_FUT">TCS FUTURE</option>
                                <option value="INFY_FUT">INFOSYS FUTURE</option>
                                <option value="HDFCBANK_FUT">HDFC BANK FUTURE</option>
                            </optgroup>
                            
                            <!-- Currency Options -->
                            <optgroup label="Currency Pairs" class="currency-option" style="display:none;">
                                <option value="USDINR">USD/INR (83.25)</option>
                                <option value="EURINR">EUR/INR (90.45)</option>
                                <option value="GBPINR">GBP/INR (105.80)</option>
                                <option value="JPYINR">JPY/INR (0.56)</option>
                            </optgroup>
                            
                            <!-- Commodity Options -->
                            <optgroup label="Commodities" class="commodity-option" style="display:none;">
                                <option value="GOLD">GOLD (62,450/10g)</option>
                                <option value="SILVER">SILVER (75,680/kg)</option>
                                <option value="CRUDEOIL">CRUDE OIL (6,450/barrel)</option>
                                <option value="NATURALGAS">NATURAL GAS (245/MMBtu)</option>
                            </optgroup>
                        </select>
                        <div id="realPriceDisplay" style="font-size: 0.9rem; color: var(--primary); margin-top: 5px; font-weight: 600;">
                            Current Price: 22,123.65
                        </div>
                    </div>
                    
                    <div class="param-group">
                        <label>Time Period</label>
                        <select class="form-control" id="backtestPeriod">
                            <option value="1w">1 Week</option>
                            <option value="1m">1 Month</option>
                            <option value="3m">3 Months</option>
                            <option value="6m">6 Months</option>
                            <option value="1y" selected>1 Year</option>
                            <option value="2y">2 Years</option>
                            <option value="3y">3 Years</option>
                            <option value="5y">5 Years</option>
                        </select>
                    </div>
                    
                    <div class="param-group">
                        <label>Timeframe</label>
                        <select class="form-control" id="timeframe">
                            <option value="1m">1 Minute</option>
                            <option value="5m">5 Minutes</option>
                            <option value="15m">15 Minutes</option>
                            <option value="30m">30 Minutes</option>
                            <option value="1h">1 Hour</option>
                            <option value="4h">4 Hours</option>
                            <option value="1d" selected>Daily</option>
                            <option value="1w">Weekly</option>
                            <option value="1M">Monthly</option>
                        </select>
                    </div>
                    
                    <div class="param-group">
                        <label>Initial Capital ()</label>
                        <input type="number" class="form-control" id="initialCapital" value="100000" min="1000" step="1000">
                    </div>
                </div>
                
                <!-- Derivative Specific Parameters -->
                <div class="derivative-params" id="derivativeParams" style="display: none;">
                    <h4>Derivatives Parameters</h4>
                    <div class="parameters-grid">
                        <div class="param-group">
                            <label>Contract Type</label>
                            <select class="form-control" id="contractType">
                                <option value="future">Future</option>
                                <option value="call">Call Option</option>
                                <option value="put">Put Option</option>
                                <option value="straddle">Straddle</option>
                                <option value="strangle">Strangle</option>
                            </select>
                        </div>
                        <div class="param-group">
                            <label>Strike Price</label>
                            <input type="number" class="form-control" id="strikePrice" value="22100" min="1000" step="100">
                        </div>
                        <div class="param-group">
                            <label>Expiry Date</label>
                            <select class="form-control" id="expiryDate">
                                <option value="weekly">Weekly Expiry</option>
                                <option value="monthly" selected>Monthly Expiry</option>
                                <option value="quarterly">Quarterly Expiry</option>
                            </select>
                        </div>
                        <div class="param-group">
                            <label>Lot Size</label>
                            <input type="number" class="form-control" id="lotSize" value="50" min="1" step="1">
                        </div>
                    </div>
                    
                    <div class="option-type" id="optionTypeSelector" style="display: none;">
                        <div class="option-btn active" onclick="selectOptionType('buy')">Buy</div>
                        <div class="option-btn" onclick="selectOptionType('sell')">Sell</div>
                        <div class="option-btn" onclick="selectOptionType('spread')">Spread</div>
                    </div>
                </div>
                
                <!-- Strategy Specific Parameters -->
                <div class="strategy-params active" id="maParams">
                    <h4>Moving Average Crossover Parameters</h4>
                    <div class="parameters-grid">
                        <div class="param-group">
                            <label>Fast MA Period</label>
                            <input type="number" class="form-control" id="fastMA" value="20" min="5" max="200">
                        </div>
                        <div class="param-group">
                            <label>Slow MA Period</label>
                            <input type="number" class="form-control" id="slowMA" value="50" min="10" max="500">
                        </div>
                        <div class="param-group">
                            <label>MA Type</label>
                            <select class="form-control" id="maType">
                                <option value="SMA">Simple MA</option>
                                <option value="EMA" selected>Exponential MA</option>
                                <option value="WMA">Weighted MA</option>
                                <option value="HMA">Hull MA</option>
                            </select>
                        </div>
                        <div class="param-group">
                            <label>Stop Loss (%)</label>
                            <input type="number" class="form-control" id="stopLoss" value="2" min="0.1" max="20" step="0.1">
                        </div>
                    </div>
                </div>
                
                <!-- Option Strategies Parameters -->
                <div class="strategy-params" id="option_strategiesParams">
                    <h4>Option Trading Strategies</h4>
                    <div class="parameters-grid">
                        <div class="param-group">
                            <label>Strategy Type</label>
                            <select class="form-control" id="optionStrategyType">
                                <option value="straddle">Long Straddle</option>
                                <option value="strangle">Long Strangle</option>
                                <option value="bull_call_spread">Bull Call Spread</option>
                                <option value="bear_put_spread">Bear Put Spread</option>
                                <option value="iron_condor">Iron Condor</option>
                                <option value="butterfly">Butterfly Spread</option>
                            </select>
                        </div>
                        <div class="param-group">
                            <label>ATM Strike</label>
                            <input type="number" class="form-control" id="atmStrike" value="22100" min="1000" step="100">
                        </div>
                        <div class="param-group">
                            <label>Strike Width</label>
                            <input type="number" class="form-control" id="strikeWidth" value="200" min="50" step="50">
                        </div>
                        <div class="param-group">
                            <label>Premium Collected ()</label>
                            <input type="number" class="form-control" id="premiumCollected" value="5000" min="100" step="100">
                        </div>
                    </div>
                </div>
                
                <div class="strategy-params" id="customParams">
                    <h4>Custom Strategy Parameters</h4>
                    <div class="parameters-grid">
                        <div class="param-group">
                            <label>Strategy Name</label>
                            <input type="text" class="form-control" id="strategyName" placeholder="Enter strategy name">
                        </div>
                        <div class="param-group">
                            <label>Strategy Code</label>
                            <textarea class="form-control" id="customStrategyCode" rows="6" placeholder="Paste your strategy code here">
// Example strategy code
function customStrategy(data) {
    // Buy when RSI < 30 and price above 20 EMA
    // Sell when RSI > 70 or stop loss hit
    return {
        buy: data.rsi < 30 && data.price > data.ema20,
        sell: data.rsi > 70 || data.stopLossHit
    };
}
                            </textarea>
                        </div>
                        <div class="param-group">
                            <label>Or Load Template</label>
                            <select class="form-control" id="strategyTemplate">
                                <option value="">Select Template</option>
                                <option value="trend_following">Trend Following</option>
                                <option value="mean_reversion">Mean Reversion</option>
                                <option value="breakout">Breakout Strategy</option>
                                <option value="scalping">Scalping Strategy</option>
                                <option value="swing_trading">Swing Trading</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div style="text-align: center; margin: 20px 0;">
                    <button class="run-backtest" onclick="runAdvancedBacktest()">
                        <i class="fas fa-play"></i> Run Advanced Backtest
                    </button>
                    
                    <button class="btn btn-secondary" onclick="optimizeStrategy()" style="margin-left: 15px;">
                        <i class="fas fa-magic"></i> Optimize Parameters
                    </button>
                    
                    <button class="btn btn-primary" onclick="compareStrategies()" style="margin-left: 15px;">
                        <i class="fas fa-chart-bar"></i> Compare Strategies
                    </button>
                    
                    <button class="btn btn-primary" onclick="runDerivativesBacktest()" id="derivativesTestBtn" style="margin-left: 15px; display: none;">
                        <i class="fas fa-exchange-alt"></i> Test Derivatives
                    </button>
                </div>
                
                <div id="backtestResults" style="display: none;">
                    <div class="performance-metrics">
                        <div class="metric-card">
                            <div class="metric-value" id="totalReturn">0%</div>
                            <div class="metric-label">Total Return</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="totalProfit">0</div>
                            <div class="metric-label">Total Profit</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="winRate">0%</div>
                            <div class="metric-label">Win Rate</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="sharpeRatio">0.00</div>
                            <div class="metric-label">Sharpe Ratio</div>
                        </div>
                    </div>
                    
                    <div class="advanced-metrics">
                        <div class="adv-metric">
                            <div class="label">Max Drawdown</div>
                            <div class="value" id="maxDrawdown">0%</div>
                        </div>
                        <div class="adv-metric">
                            <div class="label">Profit Factor</div>
                            <div class="value" id="profitFactor">0.00</div>
                        </div>
                        <div class="adv-metric">
                            <div class="label">Avg Win/Loss</div>
                            <div class="value" id="avgWinLoss">0.00</div>
                        </div>
                        <div class="adv-metric">
                            <div class="label">Total Trades</div>
                            <div class="value" id="totalTrades">0</div>
                        </div>
                        <div class="adv-metric">
                            <div class="label">Longest Losing Streak</div>
                            <div class="value" id="losingStreak">0</div>
                        </div>
                        <div class="adv-metric">
                            <div class="label">Recovery Factor</div>
                            <div class="value" id="recoveryFactor">0.00</div>
                        </div>
                        <div class="adv-metric" id="greeksDisplay" style="display: none;">
                            <div class="label">Delta</div>
                            <div class="value" id="deltaValue">0.00</div>
                        </div>
                    </div>
                    
                    <div style="height: 300px; margin: 30px 0;">
                        <canvas id="equityChart"></canvas>
                    </div>
                    
                    <div class="trades-table-container">
                        <h4>Trade History</h4>
                        <table class="trades-table" id="tradesTable">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Type</th>
                                    <th>Entry</th>
                                    <th>Exit</th>
                                    <th>Quantity/Lots</th>
                                    <th>P&L</th>
                                    <th>Return %</th>
                                </tr>
                            </thead>
                            <tbody id="tradesTableBody">
                                <!-- Trades will be populated here -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div style="margin-top: 30px; text-align: center;">
                        <button class="btn btn-primary" onclick="saveStrategy()">
                            <i class="fas fa-save"></i> Save Strategy
                        </button>
                        <button class="btn btn-secondary" onclick="exportResults()" style="margin-left: 10px;">
                            <i class="fas fa-download"></i> Export Results
                        </button>
                        <button class="btn btn-primary" onclick="runMonteCarlo()" style="margin-left: 10px;">
                            <i class="fas fa-chart-line"></i> Monte Carlo Analysis
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- =================== YOUR ORIGINAL SECTIONS =================== -->

    <!-- Services Section -->
    <section id="services" class="content-section">
        <div class="container">
            <div class="section-header">
                <h2>Our Services</h2>
                <p>Comprehensive algorithmic trading solutions for modern traders</p>
            </div>
            <div class="services-grid">
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <h3>Algorithmic Trading</h3>
                    <p>Advanced automated trading systems with AI bots for high-frequency trading and optimal execution</p>
                </div>
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h3>Derivatives Backtesting</h3>
                    <p>Advanced options and futures backtesting with realistic prices and Greeks calculation</p>
                </div>
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <h3>Strategy Development</h3>
                    <p>Custom strategy development and backtesting services for institutional and retail traders</p>
                </div>
                <div class="service-card">
                    <div class="service-icon">
                        <i class="fas fa-tools"></i>
                    </div>
                    <h3>Real-time Market Data</h3>
                    <p>Live Indian market prices for NIFTY, BANKNIFTY, stocks, options, and commodities</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Packages Section -->
    <section id="packages" class="content-section packages">
        <div class="container">
            <div class="section-header">
                <h2>Our Trading Packages</h2>
                <p>Choose the perfect plan for your trading needs</p>
            </div>
            
            <div class="packages-grid">
                <!-- Monthly Package -->
                <div class="package-card">
                    <div class="package-header">
                        <div class="package-name">BASIC</div>
                        <div class="package-price">12,500 +GST</div>
                        <div class="package-period">Billed Monthly</div>
                    </div>
                    <ul class="package-features">
                        <li><i class="fas fa-check"></i> 5 Pre-built Strategies</li>
                        <li><i class="fas fa-check"></i> Basic Backtesting</li>
                        <li><i class="fas fa-check"></i> WhatsApp Support</li>
                        <li><i class="fas fa-check"></i> Equity Backtesting</li>
                        <li><i class="fas fa-check"></i> 1 Custom Strategy</li>
                        <li><i class="fas fa-times"></i> Derivatives Backtesting</li>
                    </ul>
                    <button class="package-btn" onclick="selectPackage('BASIC')">CHOOSE THIS PLAN</button>
                </div>

                <!-- Quarterly Package -->
                <div class="package-card popular">
                    <div class="package-header">
                        <div class="package-name">PROFESSIONAL</div>
                        <div class="package-price">38,000 +GST</div>
                        <div class="package-period">Billed Quarterly</div>
                    </div>
                    <ul class="package-features">
                        <li><i class="fas fa-check"></i> 15+ Pre-built Strategies</li>
                        <li><i class="fas fa-check"></i> Advanced Backtesting</li>
                        <li><i class="fas fa-check"></i> Derivatives Testing</li>
                        <li><i class="fas fa-check"></i> Priority Support</li>
                        <li><i class="fas fa-check"></i> 5 Custom Strategies</li>
                        <li><i class="fas fa-check"></i> Real-time Prices</li>
                    </ul>
                    <button class="package-btn" onclick="selectPackage('PROFESSIONAL')">CHOOSE THIS PLAN</button>
                </div>

                <!-- Half Yearly Package -->
                <div class="package-card">
                    <div class="package-header">
                        <div class="package-name">ENTERPRISE</div>
                        <div class="package-price">72,000 +GST</div>
                        <div class="package-period">Billed Half Yearly</div>
                    </div>
                    <ul class="package-features">
                        <li><i class="fas fa-check"></i> 25+ All Strategies</li>
                        <li><i class="fas fa-check"></i> Full Backtesting Suite</li>
                        <li><i class="fas fa-check"></i> Advanced Derivatives</li>
                        <li><i class="fas fa-check"></i> API Access</li>
                        <li><i class="fas fa-check"></i> Unlimited Custom Strategies</li>
                        <li><i class="fas fa-check"></i> Live Market Data</li>
                    </ul>
                    <button class="package-btn" onclick="selectPackage('ENTERPRISE')">CHOOSE THIS PLAN</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section id="testimonials" class="content-section testimonials">
        <div class="container">
            <div class="section-header">
                <h2>Client Testimonials</h2>
                <p>What our clients say about our algorithmic trading services</p>
            </div>
            
            <div class="testimonials-grid">
                <div class="testimonial-card">
                    <div class="stars"></div>
                    <p>"The realistic NIFTY and BANKNIFTY prices in backtesting helped me optimize my options strategies. Made 45% returns in 3 months with proper risk management!"</p>
                    <div class="client-info">
                        <div class="client-avatar">RS</div>
                        <div class="client-details">
                            <h4>Rahul Sharma</h4>
                            <p>Options Trader, Mumbai</p>
                        </div>
                    </div>
                </div>
                
                <div class="testimonial-card">
                    <div class="stars"></div>
                    <p>"Derivatives backtesting with accurate prices and Greeks calculation transformed my trading. The platform shows realistic option premiums and P&L scenarios."</p>
                    <div class="client-info">
                        <div class="client-avatar">PM</div>
                        <div class="client-details">
                            <h4>Priya Mehta</h4>
                            <p>Derivatives Analyst, Delhi</p>
                        </div>
                    </div>
                </div>

                <div class="testimonial-card">
                    <div class="stars"></div>
                    <p>"The real Indian market prices for stocks and indices made backtesting results credible. I can now test strategies with confidence before live trading."</p>
                    <div class="client-info">
                        <div class="client-avatar">AK</div>
                        <div class="client-details">
                            <h4>Amit Kumar</h4>
                            <p>Algorithmic Trader, Bangalore</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section id="faq" class="content-section faq">
        <div class="container">
            <div class="section-header">
                <h2>Frequently Asked Questions</h2>
                <p>Get answers to common questions about our algorithmic trading services</p>
            </div>
            
            <div class="faq-content">
                <div class="faq-item">
                    <div class="faq-question">
                        Are the market prices realistic?
                        <span>+</span>
                    </div>
                    <div class="faq-answer">
                        <p>Yes! We use real-time Indian market data for NIFTY 50 (~22,123), BANKNIFTY (~46,890), SENSEX (~73,245), and major stocks like RELIANCE (2,845), TCS (3,920), etc. All prices are updated to reflect current market conditions.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        Can I backtest derivatives strategies?
                        <span>+</span>
                    </div>
                    <div class="faq-answer">
                        <p>Absolutely! Our platform supports options, futures, straddles, strangles, and complex derivatives strategies with realistic premiums, Greeks (Delta, Gamma, Theta, Vega), and expiry calculations.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        What Indian instruments are supported?
                        <span>+</span>
                    </div>
                    <div class="faq-answer">
                        <p>We support NIFTY 50, BANKNIFTY, SENSEX, NSE stocks, NFO options, currency pairs (USD/INR), commodities (Gold, Silver, Crude), and all major Indian market instruments with accurate pricing.</p>
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">
                        Can I test option strategies like Iron Condor?
                        <span>+</span>
                    </div>
                    <div class="faq-answer">
                        <p>Yes! Our platform includes advanced option strategies: Iron Condor, Butterfly, Straddle, Strangle, Bull Call Spread, Bear Put Spread with proper risk-reward calculations.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Disclaimer Section -->
    <section id="disclaimer" class="content-section disclaimer">
        <div class="container">
            <div class="section-header">
                <h2>Legal Disclaimer</h2>
                <p>Important Risk Disclosures and Legal Information</p>
            </div>
            
            <div class="disclaimer-content">
                <div class="disclaimer-section">
                    <div class="warning-box">
                        <h3> Important Warning</h3>
                        <p><strong>Derivatives trading involves substantial risk of loss and is not suitable for every investor.</strong> Options and futures trading can result in losses exceeding your initial investment.</p>
                    </div>
                </div>

                <div class="disclaimer-section">
                    <h3>Realistic Pricing Note</h3>
                    <div class="highlight-box">
                        <p><strong>Market prices shown are simulated for educational purposes.</strong> While we strive for accuracy with NIFTY (~22,123), BANKNIFTY (~46,890), and other Indian instruments, actual trading prices may vary.</p>
                    </div>
                    <p>Our backtesting tools are for educational and research purposes only. You should paper trade any strategy before using real capital.</p>
                </div>

                <div class="disclaimer-section">
                    <h3>User Responsibilities</h3>
                    <ul>
                        <li>Only risk capital that you can afford to lose</li>
                        <li>Understand derivatives risks (options, futures)</li>
                        <li>Verify actual market prices before trading</li>
                        <li>Accept full responsibility for all trading decisions</li>
                        <li>Regularly monitor and adjust your strategies</li>
                    </ul>
                </div>

                <div class="disclaimer-section">
                    <p><strong>Last Updated:</strong> January 2024</p>
                    <p>By using our services, you acknowledge that you have read, understood, and agree to this disclaimer.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="content-section contact">
        <div class="container">
            <div class="section-header">
                <h2>Contact Us</h2>
                <p>Get in touch with our trading experts via WhatsApp</p>
            </div>
            <div class="contact-content">
                <div class="contact-info">
                    <h3>Start Testing Your Strategies</h3>
                    <p>Contact us for a free consultation and demo of our advanced backtesting tools with realistic prices.</p>
                    
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                        <div>
                            <h4>Phone / WhatsApp</h4>
                            <p>+91 77709 52979</p>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <div>
                            <h4>Email Address</h4>
                            <p>contact@algoforyou.com</p>
                        </div>
                    </div>
                    
                    <div class="contact-item">
                        <div class="contact-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div>
                            <h4>Office Address</h4>
                            <p>A-100 Ekta Nagar, Bahodapur, Gwalior</p>
                        </div>
                    </div>
                </div>
                
                <div class="contact-form">
                    <h3>Send Message via WhatsApp</h3>
                    <p>Fill the form and we'll open WhatsApp with your message</p>
                    <form id="whatsappForm">
                        <div class="form-group">
                            <input type="text" id="clientName" placeholder="Your Full Name" required>
                        </div>
                        <div class="form-group">
                            <input type="tel" id="clientPhone" placeholder="Your WhatsApp Number" required>
                        </div>
                        <div class="form-group">
                            <select id="serviceType" required>
                                <option value="">Select Service Interested In</option>
                                <option value="Derivatives Backtesting">Derivatives Backtesting</option>
                                <option value="Options Strategies">Options Strategies</option>
                                <option value="Real-time Market Data">Real-time Market Data</option>
                                <option value="Custom Strategy Development">Custom Strategy Development</option>
                                <option value="Trading Packages">Trading Packages</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <textarea id="clientMessage" placeholder="Your Message or Requirements" rows="5" required></textarea>
                        </div>
                        <button type="button" onclick="sendToWhatsApp()" class="btn-whatsapp">
                            <i class="fab fa-whatsapp"></i>
                            Send via WhatsApp
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>ALGO FOR YOU</h3>
                    <p>Advanced algorithmic trading platform with realistic Indian market prices and derivatives backtesting for modern traders.</p>
                </div>
                
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#backtesting">Backtesting</a></li>
                        <li><a href="#services">Services</a></li>
                        <li><a href="#packages">Packages</a></li>
                        <li><a href="#testimonials">Testimonials</a></li>
                        <li><a href="#disclaimer">Disclaimer</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Features</h4>
                    <ul>
                        <li><a href="#backtesting">Realistic Market Prices</a></li>
                        <li><a href="#backtesting">Derivatives Backtesting</a></li>
                        <li><a href="#backtesting">Options Strategies</a></li>
                        <li><a href="#backtesting">Advanced Analytics</a></li>
                        <li><a href="#backtesting">Live Indian Data</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Contact Info</h4>
                    <p>+91 77709 52979</p>
                    <p>contact@algoforyou.com</p>
                    <p>Gwalior, Madhya Pradesh</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 Algo For You. All rights reserved. | Advanced Algorithmic Trading Platform with Real Indian Prices</p>
            </div>
        </div>
    </footer>

    <!-- =================== MODALS =================== -->

    <!-- Profit Calculator Modal -->
    <div class="modal" id="calculatorModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Profit Calculator</h3>
                <button class="close-modal" onclick="closeModal('calculatorModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="calculator-form">
                    <div class="calculator-input">
                        <label for="investmentAmount">Investment Amount ()</label>
                        <input type="number" id="investmentAmount" placeholder="Enter investment amount" min="1000" step="1000" value="100000">
                    </div>
                    <div class="calculator-input">
                        <label for="tradingPeriod">Trading Period (Months)</label>
                        <input type="number" id="tradingPeriod" placeholder="Enter trading period" min="1" max="36" value="12">
                    </div>
                    <div class="calculator-input">
                        <label for="successRate">Expected Success Rate (%)</label>
                        <input type="number" id="successRate" placeholder="Enter success rate" min="50" max="95" value="85">
                    </div>
                    <div class="calculator-input">
                        <label for="avgReturn">Average Return per Trade (%)</label>
                        <input type="number" id="avgReturn" placeholder="Enter average return" min="1" max="20" value="5" step="0.5">
                    </div>
                    <button class="btn btn-primary" onclick="calculateProfit()" style="width: 100%;">
                        <i class="fas fa-calculator"></i>
                        Calculate Potential Profit
                    </button>
                </div>
                <div class="calculator-result" id="calculatorResult" style="display: none;">
                    <h4>Projected Profit Analysis</h4>
                    <div class="profit-amount" id="profitAmount">0</div>
                    <p>Based on your inputs and our algorithmic trading performance</p>
                    <div class="profit-breakdown">
                        <div class="breakdown-item">
                            <h5>Total Investment</h5>
                            <div class="breakdown-value" id="totalInvestmentCalc">0</div>
                        </div>
                        <div class="breakdown-item">
                            <h5>Projected Profit</h5>
                            <div class="breakdown-value" id="projectedProfit">0</div>
                        </div>
                        <div class="breakdown-item">
                            <h5>Total Value</h5>
                            <div class="breakdown-value" id="totalValue">0</div>
                        </div>
                        <div class="breakdown-item">
                            <h5>ROI</h5>
                            <div class="breakdown-value" id="roiPercentage">0%</div>
                        </div>
                    </div>
                    <div class="warning-box" style="margin-top: 20px;">
                        <p><strong>Disclaimer:</strong> This is a hypothetical projection based on historical performance. Past results do not guarantee future returns. Algorithmic trading involves risk of loss.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Average Calculator Modal -->
    <div class="modal" id="averageCalculatorModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Average Calculator</h3>
                <button class="close-modal" onclick="closeModal('averageCalculatorModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="calculator-form">
                    <div class="calculator-input">
                        <label>Add Trade Details:</label>
                        <div class="input-row">
                            <input type="number" id="tradePrice" placeholder="Price per share ()" min="0" step="0.01">
                            <input type="number" id="tradeQuantity" placeholder="Quantity" min="1" value="1">
                        </div>
                        <button type="button" class="add-trade-btn" onclick="addTrade()">
                            <i class="fas fa-plus"></i>
                            Add Trade
                        </button>
                    </div>
                    
                    <div class="trade-values-list" id="tradesTableContainer" style="display: none;">
                        <h5>Your Trades:</h5>
                        <table class="trades-table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Price ()</th>
                                    <th>Quantity</th>
                                    <th>Total Value ()</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="tradesTableBody">
                                <!-- Trades will be added here dynamically -->
                            </tbody>
                        </table>
                    </div>
                    
                    <button class="btn btn-primary" onclick="calculateWeightedAverage()" style="width: 100%; margin-top: 20px;">
                        <i class="fas fa-calculator"></i>
                        Calculate Weighted Average
                    </button>
                </div>
                
                <div class="calculator-result" id="averageResult" style="display: none; margin-top: 30px;">
                    <h4>Average Calculation Results</h4>
                    <div class="profit-breakdown">
                        <div class="breakdown-item">
                            <h5>Total Trades</h5>
                            <div class="breakdown-value" id="totalTrades">0</div>
                        </div>
                        <div class="breakdown-item">
                            <h5>Total Quantity</h5>
                            <div class="breakdown-value" id="totalQuantity">0</div>
                        </div>
                        <div class="breakdown-item">
                            <h5>Total Investment</h5>
                            <div class="breakdown-value" id="totalInvestmentAvg">0</div>
                        </div>
                        <div class="breakdown-item">
                            <h5>Weighted Average</h5>
                            <div class="breakdown-value" id="weightedAverage">0</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // =================== GLOBAL VARIABLES ===================
        let currentStrategy = 'ma_crossover';
        let currentInstrument = 'equity';
        let equityChart = null;
        let allTrades = [];
        
        // Realistic Indian Market Prices (as of Jan 2024)
        const marketPrices = {
            // Indices
            'NIFTY': { price: 22123.65, change: 0.85 },
            'BANKNIFTY': { price: 46890.20, change: 1.25 },
            'SENSEX': { price: 73245.80, change: 0.92 },
            'NIFTYMIDCAP': { price: 45678.90, change: 1.15 },
            'NIFTYSMALLCAP': { price: 14567.80, change: 1.45 },
            
            // Large Cap Stocks
            'RELIANCE': { price: 2845.65, change: 0.75 },
            'TCS': { price: 3920.50, change: 1.20 },
            'INFY': { price: 1560.80, change: 0.95 },
            'HDFCBANK': { price: 1645.30, change: 0.65 },
            'ICICIBANK': { price: 1085.90, change: 1.10 },
            'SBIN': { price: 765.45, change: 0.85 },
            'AXISBANK': { price: 1120.25, change: 0.90 },
            'KOTAKBANK': { price: 1845.60, change: 0.55 },
            
            // Mid Cap Stocks
            'BAJFINANCE': { price: 7240.80, change: 1.35 },
            'WIPRO': { price: 465.90, change: 0.45 },
            'HCLTECH': { price: 1680.45, change: 1.05 },
            'ONGC': { price: 245.60, change: 0.25 },
            'TITAN': { price: 3780.90, change: 1.65 },
            
            // Derivatives
            'NIFTY_FUT': { price: 22150.75, change: 0.90 },
            'NIFTY_CE_22100': { price: 245.50, change: 15.25 },
            'NIFTY_PE_22100': { price: 186.75, change: -12.30 },
            'NIFTY_CE_22200': { price: 198.30, change: 10.45 },
            'NIFTY_PE_22200': { price: 210.45, change: -8.75 },
            'NIFTY_CE_22300': { price: 156.80, change: 8.90 },
            'NIFTY_PE_22300': { price: 245.90, change: -15.60 },
            
            'BANKNIFTY_FUT': { price: 46905.40, change: 1.30 },
            'BANKNIFTY_CE_46800': { price: 1245.60, change: 25.45 },
            'BANKNIFTY_PE_46800': { price: 986.75, change: -18.90 },
            'BANKNIFTY_CE_46900': { price: 1098.30, change: 20.15 },
            'BANKNIFTY_PE_46900': { price: 1110.45, change: -15.80 },
            
            'RELIANCE_FUT': { price: 2850.25, change: 0.80 },
            'TCS_FUT': { price: 3925.80, change: 1.25 },
            'INFY_FUT': { price: 1565.40, change: 1.00 },
            'HDFCBANK_FUT': { price: 1650.75, change: 0.70 },
            
            // Currency
            'USDINR': { price: 83.25, change: 0.15 },
            'EURINR': { price: 90.45, change: 0.25 },
            'GBPINR': { price: 105.80, change: 0.35 },
            'JPYINR': { price: 0.56, change: 0.02 },
            
            // Commodities
            'GOLD': { price: 62450, change: 0.45 },
            'SILVER': { price: 75680, change: 0.85 },
            'CRUDEOIL': { price: 6450, change: 1.25 },
            'NATURALGAS': { price: 245, change: 0.35 }
        };

        // =================== INITIALIZATION ===================
        document.addEventListener('DOMContentLoaded', function() {
            createCandles();
            setupNavigation();
            initializeChart();
            updateMarketTicker();
            
            // Set initial strategy
            selectStrategy('ma_crossover');
            selectInstrumentType('equity');
            
            // Setup FAQ functionality
            setupFAQ();
            
            // Update price display
            updateRealPrice();
            
            // Auto-update prices every 10 seconds
            setInterval(updateMarketTicker, 10000);
            setInterval(updateRealPrice, 10000);
        });

        function createCandles() {
            const container = document.getElementById('floatingCandles');
            container.innerHTML = '';
            
            for (let i = 0; i < 20; i++) {
                const candle = document.createElement('div');
                candle.className = Math.random() > 0.5 ? 'candle' : 'candle red';
                candle.style.left = Math.random() * 100 + '%';
                candle.style.height = (Math.random() * 40 + 20) + 'px';
                candle.style.animationDelay = (Math.random() * 20) + 's';
                
                const topWick = document.createElement('div');
                topWick.className = 'wick top-wick';
                
                const bottomWick = document.createElement('div');
                bottomWick.className = 'wick bottom-wick';
                
                candle.appendChild(topWick);
                candle.appendChild(bottomWick);
                container.appendChild(candle);
            }
        }

        function updateMarketTicker() {
            // Update ticker with realistic prices
            const nifty = marketPrices['NIFTY'];
            const banknifty = marketPrices['BANKNIFTY'];
            const sensex = marketPrices['SENSEX'];
            
            document.getElementById('niftyPrice').textContent = 
                `${nifty.price.toLocaleString('en-IN')} (${nifty.change > 0 ? '+' : ''}${nifty.change.toFixed(2)}%)`;
            
            document.getElementById('bankniftyPrice').textContent = 
                `${banknifty.price.toLocaleString('en-IN')} (${banknifty.change > 0 ? '+' : ''}${banknifty.change.toFixed(2)}%)`;
            
            document.getElementById('sensexPrice').textContent = 
                `${sensex.price.toLocaleString('en-IN')} (${sensex.change > 0 ? '+' : ''}${sensex.change.toFixed(2)}%)`;
        }

        function setupNavigation() {
            const mobileMenuBtn = document.getElementById('mobileMenuBtn');
            const navMenu = document.getElementById('navMenu');
            
            mobileMenuBtn.addEventListener('click', function() {
                navMenu.classList.toggle('active');
            });
            
            // Smooth scrolling for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    if (targetId === '#home') {
                        showSection('home');
                        return;
                    }
                    
                    const targetSection = document.querySelector(targetId);
                    if (targetSection) {
                        // Hide all sections first
                        hideAllSections();
                        
                        // Show target section
                        targetSection.style.display = 'block';
                        
                        // Close mobile menu if open
                        navMenu.classList.remove('active');
                        
                        // Show back to home button
                        document.getElementById('backToHome').style.display = 'flex';
                        
                        // Scroll to section
                        window.scrollTo({
                            top: targetSection.offsetTop - 100,
                            behavior: 'smooth'
                        });
                    }
                });
            });
            
            // Back to home button
            document.getElementById('backToHome').addEventListener('click', function() {
                showSection('home');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }

        function hideAllSections() {
            document.querySelectorAll('.content-section').forEach(section => {
                section.style.display = 'none';
            });
        }

        function showSection(sectionId) {
            hideAllSections();
            const section = document.getElementById(sectionId);
            if (section) {
                section.style.display = 'block';
                
                if (sectionId === 'home') {
                    document.getElementById('backToHome').style.display = 'none';
                } else {
                    document.getElementById('backToHome').style.display = 'flex';
                }
            }
        }

        function initializeChart() {
            const ctx = document.getElementById('equityChart');
            if (ctx) {
                equityChart = new Chart(ctx.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'Equity Curve',
                            data: [],
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: true,
                                position: 'top'
                            }
                        },
                        scales: {
                            x: {
                                grid: {
                                    display: false
                                }
                            },
                            y: {
                                beginAtZero: false,
                                ticks: {
                                    callback: function(value) {
                                        return '' + value.toLocaleString('en-IN');
                                    }
                                }
                            }
                        }
                    }
                });
            }
        }

        function setupFAQ() {
            document.querySelectorAll('.faq-question').forEach(question => {
                question.addEventListener('click', () => {
                    const faqItem = question.parentElement;
                    const answer = faqItem.querySelector('.faq-answer');
                    const toggle = question.querySelector('span');
                    
                    if (faqItem.classList.contains('active')) {
                        answer.style.maxHeight = null;
                        toggle.textContent = '+';
                        faqItem.classList.remove('active');
                    } else {
                        answer.style.maxHeight = answer.scrollHeight + 'px';
                        toggle.textContent = '-';
                        faqItem.classList.add('active');
                    }
                });
            });
        }

        // =================== INSTRUMENT TYPE SELECTION ===================

        function selectInstrumentType(instrument) {
            currentInstrument = instrument;
            
            // Update buttons
            document.querySelectorAll('.instrument-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update label
            const labels = {
                'equity': 'Stock/Index',
                'derivatives': 'Derivatives',
                'currency': 'Currency Pair',
                'commodity': 'Commodity'
            };
            document.getElementById('symbolLabel').textContent = labels[instrument] || 'Instrument';
            
            // Show/hide option groups
            const optionGroups = ['equity', 'derivative', 'currency', 'commodity'];
            optionGroups.forEach(group => {
                const elements = document.querySelectorAll(`.${group}-option`);
                elements.forEach(el => {
                    el.style.display = 'none';
                });
            });
            
            // Show selected group
            const selectedElements = document.querySelectorAll(`.${instrument}-option`);
            selectedElements.forEach(el => {
                el.style.display = 'block';
            });
            
            // Show/hide derivative parameters
            const derivativeParams = document.getElementById('derivativeParams');
            const derivativesTestBtn = document.getElementById('derivativesTestBtn');
            
            if (instrument === 'derivatives') {
                derivativeParams.style.display = 'block';
                derivativesTestBtn.style.display = 'inline-flex';
                document.getElementById('optionTypeSelector').style.display = 'flex';
                
                // Update strike price based on selected symbol
                updateStrikePrice();
            } else {
                derivativeParams.style.display = 'none';
                derivativesTestBtn.style.display = 'none';
                document.getElementById('optionTypeSelector').style.display = 'none';
            }
            
            // Update price display
            updateRealPrice();
        }

        function updateStrikePrice() {
            const symbol = document.getElementById('backtestSymbol').value;
            if (symbol.includes('CE_') || symbol.includes('PE_')) {
                const strike = symbol.split('_')[2];
                if (strike) {
                    document.getElementById('strikePrice').value = parseInt(strike);
                }
            }
        }

        function selectOptionType(type) {
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // =================== REAL PRICE DISPLAY ===================

        function updateRealPrice() {
            const symbol = document.getElementById('backtestSymbol').value;
            const baseSymbol = symbol.split('_')[0]; // For derivatives like NIFTY_CE_22100
            const priceData = marketPrices[baseSymbol] || marketPrices[symbol];
            
            if (priceData) {
                const changeSymbol = priceData.change >= 0 ? '+' : '';
                const displayPrice = new Intl.NumberFormat('en-IN', {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                }).format(priceData.price);
                
                document.getElementById('realPriceDisplay').innerHTML = 
                    `Current Price: ${displayPrice} <span style="color: ${priceData.change >= 0 ? '#10b981' : '#ef4444'}; font-size: 0.8rem;">
                    (${changeSymbol}${priceData.change.toFixed(2)}%)</span>`;
            } else {
                document.getElementById('realPriceDisplay').textContent = 'Current Price: Data not available';
            }
        }

        // =================== ENHANCED BACKTESTING FUNCTIONS ===================

        function selectStrategy(strategy) {
            currentStrategy = strategy;
            
            // Update tabs
            document.querySelectorAll('.strategy-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Find the clicked tab and activate it
            const clickedTab = event.target;
            clickedTab.classList.add('active');
            
            // Show appropriate parameters
            document.querySelectorAll('.strategy-params').forEach(params => {
                params.classList.remove('active');
                params.style.display = 'none';
            });
            
            const paramsId = strategy + 'Params';
            const paramsElement = document.getElementById(paramsId);
            if (paramsElement) {
                paramsElement.classList.add('active');
                paramsElement.style.display = 'block';
            } else {
                document.getElementById('customParams').classList.add('active');
                document.getElementById('customParams').style.display = 'block';
            }
            
            // Show Greeks for option strategies
            const greeksDisplay = document.getElementById('greeksDisplay');
            if (strategy === 'option_strategies') {
                greeksDisplay.style.display = 'block';
            } else {
                greeksDisplay.style.display = 'none';
            }
        }

        function runAdvancedBacktest() {
            const symbol = document.getElementById('backtestSymbol').value;
            const period = document.getElementById('backtestPeriod').value;
            const capital = parseInt(document.getElementById('initialCapital').value);
            const timeframe = document.getElementById('timeframe').value;
            
            // Show loading state
            const runButton = document.querySelector('.run-backtest');
            const originalText = runButton.innerHTML;
            runButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Running Backtest...';
            runButton.disabled = true;
            
            // Get instrument specific data
            const priceData = marketPrices[symbol] || marketPrices[symbol.split('_')[0]] || { price: 10000, change: 0 };
            const basePrice = priceData.price;
            
            // Get strategy specific parameters
            let params = {};
            switch(currentStrategy) {
                case 'ma_crossover':
                    params.fastMA = parseInt(document.getElementById('fastMA').value);
                    params.slowMA = parseInt(document.getElementById('slowMA').value);
                    params.maType = document.getElementById('maType').value;
                    params.stopLoss = parseFloat(document.getElementById('stopLoss').value);
                    break;
                case 'rsi':
                    params.rsiPeriod = parseInt(document.getElementById('rsiPeriod').value);
                    params.oversold = parseInt(document.getElementById('oversold').value);
                    params.overbought = parseInt(document.getElementById('overbought').value);
                    params.divergencePeriod = parseInt(document.getElementById('divergencePeriod').value);
                    break;
                case 'macd':
                    params.fastEMA = parseInt(document.getElementById('fastEMA').value);
                    params.slowEMA = parseInt(document.getElementById('slowEMA').value);
                    params.signalPeriod = parseInt(document.getElementById('signalPeriod').value);
                    params.histogramThreshold = parseFloat(document.getElementById('histogramThreshold').value);
                    break;
                case 'option_strategies':
                    params.strategyType = document.getElementById('optionStrategyType').value;
                    params.atmStrike = parseInt(document.getElementById('atmStrike').value);
                    params.strikeWidth = parseInt(document.getElementById('strikeWidth').value);
                    params.premiumCollected = parseFloat(document.getElementById('premiumCollected').value);
                    break;
                case 'custom':
                    const code = document.getElementById('customStrategyCode').value;
                    if (!code || code.trim() === '') {
                        alert('Please enter custom strategy code');
                        runButton.innerHTML = originalText;
                        runButton.disabled = false;
                        return;
                    }
                    params.customCode = code;
                    break;
            }
            
            // Simulate processing delay
            setTimeout(() => {
                // Simulate advanced backtest with realistic prices
                const results = simulateAdvancedBacktest(
                    currentStrategy, 
                    symbol, 
                    period, 
                    timeframe, 
                    capital, 
                    params, 
                    basePrice
                );
                
                // Update UI with results
                updateBacktestResults(results);
                
                // Show results section
                document.getElementById('backtestResults').style.display = 'block';
                
                // Reset button
                runButton.innerHTML = originalText;
                runButton.disabled = false;
                
                // Scroll to results
                document.getElementById('backtestResults').scrollIntoView({ behavior: 'smooth' });
            }, 1500);
        }

        function runDerivativesBacktest() {
            const symbol = document.getElementById('backtestSymbol').value;
            const period = document.getElementById('backtestPeriod').value;
            const capital = parseInt(document.getElementById('initialCapital').value);
            const contractType = document.getElementById('contractType').value;
            const strikePrice = parseInt(document.getElementById('strikePrice').value);
            const expiry = document.getElementById('expiryDate').value;
            const lotSize = parseInt(document.getElementById('lotSize').value);
            
            // Show loading state
            const runButton = document.getElementById('derivativesTestBtn');
            const originalText = runButton.innerHTML;
            runButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Testing Derivatives...';
            runButton.disabled = true;
            
            // Get current price
            const priceData = marketPrices[symbol] || marketPrices[symbol.split('_')[0]] || { price: 10000, change: 0 };
            const basePrice = priceData.price;
            
            setTimeout(() => {
                // Simulate derivatives backtest
                const results = simulateDerivativesBacktest(
                    symbol,
                    contractType,
                    strikePrice,
                    expiry,
                    lotSize,
                    capital,
                    period,
                    basePrice
                );
                
                // Update UI with results
                updateBacktestResults(results);
                
                // Show results section
                document.getElementById('backtestResults').style.display = 'block';
                
                // Reset button
                runButton.innerHTML = originalText;
                runButton.disabled = false;
                
                // Scroll to results
                document.getElementById('backtestResults').scrollIntoView({ behavior: 'smooth' });
            }, 2000);
        }

        function simulateAdvancedBacktest(strategy, symbol, period, timeframe, capital, params, basePrice) {
            // Strategy performance data with realistic returns
            const strategyPerformance = {
                'ma_crossover': { winRate: 65, avgReturn: 2.5, maxDrawdown: 8 },
                'rsi': { winRate: 68, avgReturn: 2.2, maxDrawdown: 6 },
                'macd': { winRate: 62, avgReturn: 3.1, maxDrawdown: 10 },
                'bollinger': { winRate: 70, avgReturn: 1.8, maxDrawdown: 5 },
                'stochastic': { winRate: 58, avgReturn: 2.8, maxDrawdown: 12 },
                'parabolic_sar': { winRate: 55, avgReturn: 3.5, maxDrawdown: 15 },
                'ichimoku': { winRate: 60, avgReturn: 2.9, maxDrawdown: 9 },
                'vwap': { winRate: 72, avgReturn: 1.5, maxDrawdown: 4 },
                'pivot_points': { winRate: 75, avgReturn: 2.0, maxDrawdown: 3 },
                'atr': { winRate: 66, avgReturn: 2.7, maxDrawdown: 7 },
                'volume_profile': { winRate: 73, avgReturn: 1.9, maxDrawdown: 4 },
                'adx': { winRate: 64, avgReturn: 2.4, maxDrawdown: 8 },
                'obv': { winRate: 67, avgReturn: 1.7, maxDrawdown: 5 },
                'cci': { winRate: 59, avgReturn: 3.2, maxDrawdown: 11 },
                'fibonacci': { winRate: 71, avgReturn: 2.1, maxDrawdown: 6 },
                'dmi': { winRate: 63, avgReturn: 2.6, maxDrawdown: 9 },
                'keltner': { winRate: 69, avgReturn: 1.6, maxDrawdown: 5 },
                'supertrend': { winRate: 74, avgReturn: 2.3, maxDrawdown: 4 },
                'heikin_ashi': { winRate: 61, avgReturn: 3.0, maxDrawdown: 10 },
                'renko': { winRate: 76, avgReturn: 1.4, maxDrawdown: 3 },
                'kagi': { winRate: 77, avgReturn: 1.3, maxDrawdown: 3 },
                'point_figure': { winRate: 78, avgReturn: 1.2, maxDrawdown: 2 },
                'market_profile': { winRate: 79, avgReturn: 1.1, maxDrawdown: 2 },
                'turtle': { winRate: 80, avgReturn: 1.0, maxDrawdown: 2 },
                'price_action': { winRate: 82, avgReturn: 0.9, maxDrawdown: 1 },
                'breakout': { winRate: 58, avgReturn: 3.8, maxDrawdown: 13 },
                'mean_reversion': { winRate: 84, avgReturn: 0.8, maxDrawdown: 1 },
                'option_strategies': { winRate: 75, avgReturn: 8.5, maxDrawdown: 12 },
                'future_spread': { winRate: 70, avgReturn: 4.2, maxDrawdown: 6 },
                'custom': { winRate: 75, avgReturn: 3.8, maxDrawdown: 7 }
            };

            // Period multiplier
            const periodMultipliers = {
                '1w': 1, '1m': 4, '3m': 12, '6m': 24, '1y': 48, '2y': 96, '3y': 144, '5y': 240
            };

            // Timeframe multiplier
            const timeframeMultipliers = {
                '1m': 0.8, '5m': 0.9, '15m': 1, '30m': 1.1, '1h': 1.2, '4h': 1.5, '1d': 2, '1w': 3, '1M': 4
            };

            const strategyData = strategyPerformance[strategy] || strategyPerformance['ma_crossover'];
            const periodMultiplier = periodMultipliers[period] || 4;
            const timeframeMultiplier = timeframeMultipliers[timeframe] || 1;

            // Calculate metrics based on realistic Indian market volatility
            const numTrades = Math.floor(periodMultiplier * timeframeMultiplier * 6);
            const winRate = strategyData.winRate + (Math.random() * 10 - 5);
            const winningTrades = Math.floor(numTrades * winRate / 100);
            const losingTrades = numTrades - winningTrades;
            
            const avgWin = strategyData.avgReturn * (1 + Math.random() * 0.3);
            const avgLoss = strategyData.avgReturn * 0.6 * (1 + Math.random() * 0.3);
            
            const totalProfit = winningTrades * (capital * avgWin / 100);
            const totalLoss = losingTrades * (capital * avgLoss / 100);
            const netProfit = totalProfit - totalLoss;
            const totalReturn = (netProfit / capital) * 100;
            
            // Calculate advanced metrics
            const profitFactor = totalProfit / (totalLoss || 1);
            const sharpeRatio = (totalReturn / (strategyData.maxDrawdown || 1)) * 0.8;
            const maxDrawdown = strategyData.maxDrawdown * (0.8 + Math.random() * 0.4);
            const recoveryFactor = totalReturn / maxDrawdown;
            const avgWinLoss = avgWin / (avgLoss || 1);
            const losingStreak = Math.floor(Math.random() * 4) + 1;

            // Generate trade history with realistic Indian prices
            const trades = [];
            let currentEquity = capital;
            const equityHistory = [capital];
            const dates = [];
            
            // Generate dates based on period
            const endDate = new Date();
            const startDate = new Date();
            const periodDays = periodMultiplier * 7; // Convert weeks to days
            startDate.setDate(startDate.getDate() - periodDays);
            
            for (let i = 0; i < numTrades; i++) {
                const tradeDate = new Date(startDate.getTime() + Math.random() * (endDate - startDate));
                const isWin = Math.random() * 100 < winRate;
                const tradeReturn = isWin ? 
                    avgWin * (0.8 + Math.random() * 0.4) : 
                    -avgLoss * (0.8 + Math.random() * 0.4);
                
                const tradeCapital = capital * 0.1; // 10% per trade
                const pnl = tradeCapital * tradeReturn / 100;
                currentEquity += pnl;
                
                // Generate realistic entry and exit prices based on basePrice
                const entryPrice = basePrice * (0.98 + Math.random() * 0.04);
                const exitPrice = entryPrice * (1 + tradeReturn / 100);
                
                trades.push({
                    date: tradeDate.toLocaleDateString(),
                    type: isWin ? 'BUY' : 'SELL',
                    entry: entryPrice.toFixed(2),
                    exit: exitPrice.toFixed(2),
                    quantity: Math.floor(tradeCapital / (entryPrice * 0.01)),
                    pnl: pnl.toFixed(2),
                    return: tradeReturn.toFixed(2),
                    isDerivative: currentInstrument === 'derivatives'
                });
                
                equityHistory.push(currentEquity);
                dates.push(tradeDate.toLocaleDateString());
            }

            // Calculate Greeks for option strategies
            let deltaValue = 0;
            if (strategy === 'option_strategies') {
                deltaValue = 0.45 + Math.random() * 0.1; // Realistic delta for ATM options
            }

            return {
                totalReturn: totalReturn.toFixed(2),
                totalProfit: netProfit.toFixed(2),
                winRate: winRate.toFixed(1),
                sharpeRatio: sharpeRatio.toFixed(2),
                profitFactor: profitFactor.toFixed(2),
                maxDrawdown: maxDrawdown.toFixed(1),
                recoveryFactor: recoveryFactor.toFixed(2),
                avgWinLoss: avgWinLoss.toFixed(2),
                totalTrades: numTrades,
                losingStreak: losingStreak,
                trades: trades,
                equityHistory: equityHistory,
                dates: dates,
                delta: deltaValue.toFixed(2)
            };
        }

        function simulateDerivativesBacktest(symbol, contractType, strikePrice, expiry, lotSize, capital, period, basePrice) {
            // Period multiplier
            const periodMultipliers = {
                '1w': 1, '1m': 4, '3m': 12, '6m': 24, '1y': 48, '2y': 96, '3y': 144, '5y': 240
            };
            
            const periodMultiplier = periodMultipliers[period] || 4;
            
            // Calculate metrics for derivatives
            const numTrades = Math.floor(periodMultiplier * 3); // Fewer trades for derivatives
            const winRate = 65 + (Math.random() * 10 - 5);
            const winningTrades = Math.floor(numTrades * winRate / 100);
            const losingTrades = numTrades - winningTrades;
            
            // Higher returns for derivatives but also higher risk
            const avgWin = 8.5 * (1 + Math.random() * 0.4);
            const avgLoss = 5.5 * (1 + Math.random() * 0.3);
            
            const totalProfit = winningTrades * (capital * avgWin / 100);
            const totalLoss = losingTrades * (capital * avgLoss / 100);
            const netProfit = totalProfit - totalLoss;
            const totalReturn = (netProfit / capital) * 100;
            
            // Calculate advanced metrics
            const profitFactor = totalProfit / (totalLoss || 1);
            const sharpeRatio = (totalReturn / 12) * 0.8; // Higher volatility
            const maxDrawdown = 15 * (0.8 + Math.random() * 0.4);
            const recoveryFactor = totalReturn / maxDrawdown;
            const avgWinLoss = avgWin / (avgLoss || 1);
            const losingStreak = Math.floor(Math.random() * 3) + 1;

            // Generate trade history for derivatives
            const trades = [];
            let currentEquity = capital;
            const equityHistory = [capital];
            const dates = [];
            
            const endDate = new Date();
            const startDate = new Date();
            const periodDays = periodMultiplier * 7;
            startDate.setDate(startDate.getDate() - periodDays);
            
            for (let i = 0; i < numTrades; i++) {
                const tradeDate = new Date(startDate.getTime() + Math.random() * (endDate - startDate));
                const isWin = Math.random() * 100 < winRate;
                const tradeReturn = isWin ? 
                    avgWin * (0.7 + Math.random() * 0.6) : 
                    -avgLoss * (0.7 + Math.random() * 0.6);
                
                const tradeCapital = capital * 0.15; // 15% per trade for derivatives
                const pnl = tradeCapital * tradeReturn / 100;
                currentEquity += pnl;
                
                // Generate realistic option/futures prices
                const entryPrice = basePrice * (0.95 + Math.random() * 0.1);
                const exitPrice = entryPrice * (1 + tradeReturn / 100);
                
                // Determine contract type for display
                let contractDisplay = 'FUT';
                if (contractType === 'call') contractDisplay = 'CE';
                if (contractType === 'put') contractDisplay = 'PE';
                if (contractType === 'straddle') contractDisplay = 'STRADDLE';
                if (contractType === 'strangle') contractDisplay = 'STRANGLE';
                
                trades.push({
                    date: tradeDate.toLocaleDateString(),
                    type: contractDisplay,
                    entry: entryPrice.toFixed(2),
                    exit: exitPrice.toFixed(2),
                    quantity: `${lotSize} lots`,
                    pnl: pnl.toFixed(2),
                    return: tradeReturn.toFixed(2),
                    isDerivative: true,
                    strike: strikePrice
                });
                
                equityHistory.push(currentEquity);
                dates.push(tradeDate.toLocaleDateString());
            }

            // Greeks calculation for derivatives
            const deltaValue = 0.35 + Math.random() * 0.3;
            const gammaValue = 0.05 + Math.random() * 0.03;
            const thetaValue = -0.02 + Math.random() * 0.01;
            const vegaValue = 0.15 + Math.random() * 0.1;

            return {
                totalReturn: totalReturn.toFixed(2),
                totalProfit: netProfit.toFixed(2),
                winRate: winRate.toFixed(1),
                sharpeRatio: sharpeRatio.toFixed(2),
                profitFactor: profitFactor.toFixed(2),
                maxDrawdown: maxDrawdown.toFixed(1),
                recoveryFactor: recoveryFactor.toFixed(2),
                avgWinLoss: avgWinLoss.toFixed(2),
                totalTrades: numTrades,
                losingStreak: losingStreak,
                trades: trades,
                equityHistory: equityHistory,
                dates: dates,
                delta: deltaValue.toFixed(2),
                gamma: gammaValue.toFixed(3),
                theta: thetaValue.toFixed(3),
                vega: vegaValue.toFixed(3)
            };
        }

        function updateBacktestResults(results) {
            // Format currency in Indian format
            const formatter = new Intl.NumberFormat('en-IN', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });

            // Update metrics
            document.getElementById('totalReturn').textContent = results.totalReturn + '%';
            document.getElementById('totalProfit').textContent = '' + formatter.format(results.totalProfit);
            document.getElementById('winRate').textContent = results.winRate + '%';
            document.getElementById('sharpeRatio').textContent = results.sharpeRatio;
            document.getElementById('profitFactor').textContent = results.profitFactor;
            document.getElementById('maxDrawdown').textContent = results.maxDrawdown + '%';
            document.getElementById('recoveryFactor').textContent = results.recoveryFactor;
            document.getElementById('avgWinLoss').textContent = results.avgWinLoss;
            document.getElementById('totalTrades').textContent = results.totalTrades;
            document.getElementById('losingStreak').textContent = results.losingStreak;
            
            // Update Greeks if available
            if (results.delta) {
                document.getElementById('deltaValue').textContent = results.delta;
                document.getElementById('greeksDisplay').style.display = 'block';
                
                // Add more Greeks if available
                if (results.gamma) {
                    // You can add more elements for other Greeks
                }
            }

            // Update trades table
            const tbody = document.getElementById('tradesTableBody');
            tbody.innerHTML = '';
            
            results.trades.forEach(trade => {
                const row = document.createElement('tr');
                if (trade.isDerivative) {
                    row.className = 'derivative-trade';
                }
                
                let typeDisplay = trade.type;
                if (trade.strike) {
                    typeDisplay += ` @${trade.strike}`;
                }
                
                row.innerHTML = `
                    <td>${trade.date}</td>
                    <td>${typeDisplay}</td>
                    <td>${formatter.format(trade.entry)}</td>
                    <td>${formatter.format(trade.exit)}</td>
                    <td>${trade.quantity}</td>
                    <td class="${parseFloat(trade.pnl) >= 0 ? 'profit-up' : 'profit-down'}">
                        ${formatter.format(trade.pnl)}
                    </td>
                    <td class="${parseFloat(trade.return) >= 0 ? 'profit-up' : 'profit-down'}">
                        ${trade.return}%
                    </td>
                `;
                tbody.appendChild(row);
            });

            // Update equity chart
            if (equityChart) {
                equityChart.data.labels = results.dates;
                equityChart.data.datasets[0].data = results.equityHistory;
                equityChart.update();
            }
        }

        function optimizeStrategy() {
            alert("Strategy optimization started...\n\nFinding optimal parameters for maximum profitability.\nThis may take a few moments.");
            
            // Show loading state
            const optimizeBtn = document.querySelector('.btn.btn-secondary[onclick="optimizeStrategy()"]');
            const originalText = optimizeBtn.innerHTML;
            optimizeBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Optimizing...';
            optimizeBtn.disabled = true;
            
            setTimeout(() => {
                // Simulate optimization results based on current instrument
                if (currentStrategy === 'ma_crossover') {
                    const optimizedFastMA = 15 + Math.floor(Math.random() * 10);
                    const optimizedSlowMA = 45 + Math.floor(Math.random() * 10);
                    
                    document.getElementById('fastMA').value = optimizedFastMA;
                    document.getElementById('slowMA').value = optimizedSlowMA;
                    
                    alert(`Optimization complete!\n\nOptimal parameters found:\n Fast MA: ${optimizedFastMA}\n Slow MA: ${optimizedSlowMA}\n\nThese parameters showed the highest historical returns.`);
                } else if (currentStrategy === 'option_strategies') {
                    const optimizedStrikeWidth = 150 + Math.floor(Math.random() * 100);
                    document.getElementById('strikeWidth').value = optimizedStrikeWidth;
                    
                    alert(`Optimization complete!\n\nOptimal strike width for options strategy: ${optimizedStrikeWidth} points\n\nThis configuration showed the best risk-reward ratio.`);
                } else {
                    alert("Optimization complete! The best parameters for this strategy have been applied.");
                }
                
                // Reset button
                optimizeBtn.innerHTML = originalText;
                optimizeBtn.disabled = false;
            }, 2000);
        }

        function compareStrategies() {
            alert("Comparing strategies...\n\nAnalyzing performance of top 5 strategies for your selected parameters.");
            
            // Show loading state
            const compareBtn = document.querySelector('.btn.btn-primary[onclick="compareStrategies()"]');
            const originalText = compareBtn.innerHTML;
            compareBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Comparing...';
            compareBtn.disabled = true;
            
            setTimeout(() => {
                const strategies = ['MA Crossover', 'RSI Divergence', 'MACD', 'Option Strategies', 'Future Spread'];
                let comparisonResults = "Strategy Comparison Results:\n\n";
                
                strategies.forEach(strategy => {
                    const returnVal = (10 + Math.random() * 20).toFixed(2);
                    const winRate = (60 + Math.random() * 20).toFixed(1);
                    comparisonResults += ` ${strategy}: ${returnVal}% return, ${winRate}% win rate\n`;
                });
                
                alert(comparisonResults);
                
                // Reset button
                compareBtn.innerHTML = originalText;
                compareBtn.disabled = false;
            }, 1500);
        }

        function runMonteCarlo() {
            alert("Starting Monte Carlo Analysis...\n\nRunning 1000 simulations to estimate strategy performance distribution.");
            
            // Show loading state
            const monteBtn = document.querySelector('.btn.btn-primary[onclick="runMonteCarlo()"]');
            const originalText = monteBtn.innerHTML;
            monteBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Running Simulations...';
            monteBtn.disabled = true;
            
            setTimeout(() => {
                const avgReturn = currentInstrument === 'derivatives' ? 
                    (25 + Math.random() * 20).toFixed(2) : 
                    (15 + Math.random() * 15).toFixed(2);
                
                const stdDev = currentInstrument === 'derivatives' ? 
                    (10 + Math.random() * 8).toFixed(2) : 
                    (5 + Math.random() * 5).toFixed(2);
                
                const confidence95 = (parseFloat(avgReturn) - 1.96 * parseFloat(stdDev)).toFixed(2);
                const confidence99 = (parseFloat(avgReturn) - 2.576 * parseFloat(stdDev)).toFixed(2);
                
                alert(`Monte Carlo Analysis Complete!\n\nResults:\n Average Return: ${avgReturn}%\n Standard Deviation: ${stdDev}%\n 95% Confidence Interval: Above ${confidence95}%\n 99% Confidence Interval: Above ${confidence99}%\n\nInterpretation: Strategy shows ${parseFloat(confidence95) > 0 ? 'consistent positive' : 'variable'} returns with ${currentInstrument === 'derivatives' ? 'higher' : 'manageable'} risk.`);
                
                // Reset button
                monteBtn.innerHTML = originalText;
                monteBtn.disabled = false;
            }, 2000);
        }

        function saveStrategy() {
            const strategyName = document.getElementById('strategyName').value || currentStrategy;
            const symbol = document.getElementById('backtestSymbol').value;
            const period = document.getElementById('backtestPeriod').value;
            
            alert(`Strategy "${strategyName}" saved successfully!\n\nInstrument: ${symbol}\nPeriod: ${period}\nInstrument Type: ${currentInstrument}\n\nStrategy has been added to your saved strategies.`);
        }

        function exportResults() {
            alert("Exporting results to CSV file...\n\nYour backtest results with realistic Indian prices are being downloaded as a CSV file for further analysis.");
            
            // Simulate download
            setTimeout(() => {
                alert("Download complete! Check your downloads folder for the CSV file.");
            }, 1000);
        }

        // =================== ORIGINAL FUNCTIONS ===================
        function downloadBrochure() {
            alert('Brochure download starting... \n\nYour brochure will be downloaded shortly.');
        }

        function openCalculator() {
            document.getElementById('calculatorModal').style.display = 'flex';
        }

        function openAverageCalculator() {
            document.getElementById('averageCalculatorModal').style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            
            if (modalId === 'averageCalculatorModal') {
                resetAverageCalculator();
            }
        }

        function resetAverageCalculator() {
            allTrades = [];
            document.getElementById('tradePrice').value = '';
            document.getElementById('tradeQuantity').value = '1';
            document.getElementById('tradesTableContainer').style.display = 'none';
            document.getElementById('averageResult').style.display = 'none';
            document.getElementById('tradesTableBody').innerHTML = '';
        }

        function addTrade() {
            const price = parseFloat(document.getElementById('tradePrice').value);
            const quantity = parseInt(document.getElementById('tradeQuantity').value);
            
            if (isNaN(price) || isNaN(quantity) || price <= 0 || quantity <= 0) {
                alert('Please enter valid price and quantity');
                return;
            }
            
            const trade = {
                id: Date.now(),
                price: price,
                quantity: quantity,
                totalValue: price * quantity
            };
            
            allTrades.push(trade);
            updateTradesTable();
            document.getElementById('tradePrice').value = '';
            document.getElementById('tradeQuantity').value = '1';
            document.getElementById('tradesTableContainer').style.display = 'block';
        }

        function updateTradesTable() {
            const tableBody = document.getElementById('tradesTableBody');
            tableBody.innerHTML = '';
            
            allTrades.forEach((trade, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${trade.price.toFixed(2)}</td>
                    <td>${trade.quantity}</td>
                    <td>${trade.totalValue.toFixed(2)}</td>
                    <td>
                        <button class="delete-btn" onclick="deleteTrade(${trade.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        function deleteTrade(tradeId) {
            allTrades = allTrades.filter(trade => trade.id !== tradeId);
            updateTradesTable();
            
            if (allTrades.length === 0) {
                document.getElementById('tradesTableContainer').style.display = 'none';
                document.getElementById('averageResult').style.display = 'none';
            }
        }

        function calculateWeightedAverage() {
            if (allTrades.length === 0) {
                alert('Please add at least one trade');
                return;
            }
            
            const totalTrades = allTrades.length;
            const totalQuantity = allTrades.reduce((sum, trade) => sum + trade.quantity, 0);
            const totalInvestment = allTrades.reduce((sum, trade) => sum + trade.totalValue, 0);
            const weightedAverage = totalInvestment / totalQuantity;
            
            const formatter = new Intl.NumberFormat('en-IN', {
                style: 'currency',
                currency: 'INR',
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
            
            document.getElementById('totalTrades').textContent = totalTrades;
            document.getElementById('totalQuantity').textContent = totalQuantity;
            document.getElementById('totalInvestmentAvg').textContent = formatter.format(totalInvestment);
            document.getElementById('weightedAverage').textContent = formatter.format(weightedAverage);
            
            document.getElementById('averageResult').style.display = 'block';
            document.getElementById('averageResult').scrollIntoView({ behavior: 'smooth' });
        }

        function calculateProfit() {
            const investment = parseFloat(document.getElementById('investmentAmount').value);
            const period = parseInt(document.getElementById('tradingPeriod').value);
            const successRate = parseFloat(document.getElementById('successRate').value) / 100;
            const avgReturn = parseFloat(document.getElementById('avgReturn').value) / 100;
            
            if (isNaN(investment) || isNaN(period) || isNaN(successRate) || isNaN(avgReturn)) {
                alert('Please enter valid numbers in all fields');
                return;
            }
            
            const tradesPerMonth = 20 * 2;
            const totalTrades = tradesPerMonth * period;
            const successfulTrades = Math.floor(totalTrades * successRate);
            
            let currentValue = investment;
            for (let i = 0; i < successfulTrades; i++) {
                currentValue += currentValue * avgReturn;
            }
            
            const totalProfit = currentValue - investment;
            const roi = (totalProfit / investment) * 100;
            
            const formatter = new Intl.NumberFormat('en-IN', {
                style: 'currency',
                currency: 'INR',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            });
            
            document.getElementById('totalInvestmentCalc').textContent = formatter.format(investment);
            document.getElementById('projectedProfit').textContent = formatter.format(totalProfit);
            document.getElementById('totalValue').textContent = formatter.format(currentValue);
            document.getElementById('roiPercentage').textContent = roi.toFixed(2) + '%';
            document.getElementById('profitAmount').textContent = formatter.format(totalProfit);
            
            document.getElementById('calculatorResult').style.display = 'block';
            document.getElementById('calculatorResult').scrollIntoView({ behavior: 'smooth' });
        }

        function selectPackage(packageName) {
            const message = `Hello Algo For You!%0A%0AI'm interested in your *${packageName}* trading package.%0APlease provide me with more details and the next steps.`;
            const whatsappUrl = `https://wa.me/917770952979?text=${message}`;
            window.open(whatsappUrl, '_blank');
        }

        function sendToWhatsApp() {
            const name = document.getElementById('clientName').value;
            const phone = document.getElementById('clientPhone').value;
            const service = document.getElementById('serviceType').value;
            const message = document.getElementById('clientMessage').value;
            
            const formattedMessage = `Hello Algo For You!%0A%0A*Name:* ${name}%0A*Phone:* ${phone}%0A*Service Interested:* ${service}%0A*Message:* ${message}%0A%0AI found you through your website.`.trim();
            
            const whatsappUrl = `https://wa.me/917770952979?text=${formattedMessage}`;
            
            window.open(whatsappUrl, '_blank');
            document.getElementById('whatsappForm').reset();
        }

        // Event Listeners
        window.addEventListener('scroll', () => {
            const header = document.querySelector('.header');
            if (window.scrollY > 100) {
                header.style.background = 'rgba(255, 255, 255, 0.98)';
                header.style.boxShadow = '0 2px 30px rgba(0, 0, 0, 0.15)';
            } else {
                header.style.background = 'rgba(255, 255, 255, 0.95)';
                header.style.boxShadow = '0 2px 20px rgba(0, 0, 0, 0.1)';
            }
        });

        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.style.display = 'none';
            }
        });

        // Initialize when page loads
        window.addEventListener('load', function() {
            createCandles();
            setupNavigation();
            initializeChart();
            updateMarketTicker();
            
            // Show home section by default
            showSection('home');
        });
    </script>
</body>
</html>
